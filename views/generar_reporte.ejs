<%- include('includes/head.ejs') %>
    <script src="/js/chartjs.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/patternomaly@1.3.2/dist/patternomaly.min.js"></script>
    <%- include('includes/topbar.ejs') %>
        <%- include('includes/sidebar.ejs') %>
        <div class="col py-3"3
          <div height class="container">
            <canvas id="myChart" width="400" height="200"></canvas>
            <a id="download"
                    download="ChartImage.jpg"
                    href=""
                    class="btn btn-primary float-right bg-flat-color-1"
                    title="Descargar GrÃ¡fico">

                    <!-- Download Icon -->
             <i class="fa fa-download"></i>
             </a>
            </div>
          </div>

<script>
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [
            <% for(let i of days)  { %>
              '<%= i %>',
            <% } %>
            ],
            datasets: [{
                label: "Cantidad de solicitudes",
                data: [<%=data %>],
                backgroundColor: [
                    pattern.draw("diagonal-right-left", 'rgba(255, 99, 132, 0.2)'),
                    pattern.draw("diagonal-right-left", 'rgba(54, 162, 235, 0.2)'),
                    pattern.draw("diagonal-right-left", 'rgba(255, 206, 86, 0.2)'),
                    pattern.draw("diagonal-right-left", 'rgba(75, 192, 192, 0.2)'),
                    pattern.draw("diagonal-right-left", 'rgba(153, 102, 255, 0.2)'),
                    pattern.draw("diagonal-right-left", 'rgba(255, 159, 64, 0.2)')
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
              //y: {beginAtZero: true},
              yAxes: {title: {display: true, text: "Solicitudes de <%= tabla%>", font: {size: 15}},ticks: {precision: 0}},
              xAxes: {title: {display: true, text: "<%= xLabel%>", font: {size: 15}},ticks: {precision: 0}}
            },
            plugins: {
                title: {display: true, text: "<%= tittle%>", font: {size: 22}}
            }
        }
    });

</script>
<!--<script src="/js/generategraph.js"></script>-->
<script src="/js/downloadchart.js"></script>


<%- include('includes/foot.ejs') %>
